# üéâ –≠–¢–ê–ü 2 –ó–ê–í–ï–†–®–Å–ù!

## ‚úÖ –ü–æ–ª–Ω–æ—Å—Ç—å—é —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω —É–ª—É—á—à–µ–Ω–Ω—ã–π —Å—Ü–µ–Ω–∞—Ä–∏–π –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –ª–µ–∫–∞—Ä—Å—Ç–≤

### –§–∞–π–ª: `src/bot/scenes/add-medication-improved.scene.ts`

**–í—Å–µ–≥–æ —à–∞–≥–æ–≤:** 13  
**–°—Ç—Ä–æ–∫ –∫–æ–¥–∞:** ~550

---

## üìã –ü–æ–ª–Ω—ã–π —Å–ø–∏—Å–æ–∫ —à–∞–≥–æ–≤:

### **–ë–∞–∑–æ–≤–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è (–®–∞–≥–∏ 1-5)**
1. ‚úÖ –í–≤–æ–¥ –Ω–∞–∑–≤–∞–Ω–∏—è
2. ‚úÖ –û–ø–∏—Å–∞–Ω–∏–µ (—Å /skip)
3. ‚úÖ **–î–∞—Ç–∞ –Ω–∞—á–∞–ª–∞** - –°–µ–≥–æ–¥–Ω—è / –ó–∞–≤—Ç—Ä–∞ / üìÜ –ö–∞–ª–µ–Ω–¥–∞—Ä—å
4. ‚úÖ **–î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å** - –ë–µ—Å—Å—Ä–æ—á–Ω–æ / 7/14/30 –¥–Ω–µ–π / üìÜ –í—ã–±–æ—Ä –ø–µ—Ä–∏–æ–¥–∞
5. ‚úÖ **–ß–∞—Å—Ç–æ—Ç–∞ –ø—Ä–∏—ë–º–∞:**
   - –ö–∞–∂–¥—ã–π –¥–µ–Ω—å
   - üìÖ **–í—ã–±–æ—Ä –¥–Ω–µ–π –Ω–µ–¥–µ–ª–∏** (–ü–Ω-–í—Å —Å –≥–∞–ª–æ—á–∫–∞–º–∏)
   - –ß–µ—Ä–µ–∑ N –¥–Ω–µ–π

### **–†–∞—Å–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–∏—ë–º–∞ (–®–∞–≥–∏ 6-11)**
6. ‚úÖ **–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ä–∞–∑ –≤ –¥–µ–Ω—å** - 1/2/3 –∏–ª–∏ custom (1-10)
7. ‚úÖ **–¶–∏–∫–ª –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –ø—Ä–∏—ë–º–∞:**
   - **–í–≤–æ–¥ –≤—Ä–µ–º–µ–Ω–∏** (–ß–ß:–ú–ú —Å –≤–∞–ª–∏–¥–∞—Ü–∏–µ–π)
   - **–í–≤–æ–¥ –¥–æ–∑–∏—Ä–æ–≤–∫–∏** (—Ç–µ–∫—Å—Ç)
   - **–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ –ø—Ä–∏—ë–º–∞:**
     - –î–æ –µ–¥—ã
     - –ü–æ—Å–ª–µ –µ–¥—ã
     - **–í–æ –≤—Ä–µ–º—è –µ–¥—ã** ‚¨ÖÔ∏è –ù–û–í–û–ï!
     - –ü—Ä–æ–ø—É—Å—Ç–∏—Ç—å

### **–§–∏–Ω–∞–ª (–®–∞–≥–∏ 12-13)**
8. ‚úÖ **–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ** - –∫—Ä–∞—Å–∏–≤–æ–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –≤—Å–µ—Ö –¥–∞–Ω–Ω—ã—Ö
9. ‚úÖ **–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ –ë–î** —á–µ—Ä–µ–∑ MedicationService

---

## üîß –û–±–Ω–æ–≤–ª—ë–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã:

1. **`src/bot/scenes/add-medication-improved.scene.ts`** (–Ω–æ–≤—ã–π)
   - –ü–æ–ª–Ω—ã–π —Å—Ü–µ–Ω–∞—Ä–∏–π —Å 13 —à–∞–≥–∞–º–∏

2. **`src/services/medication.service.ts`** (–æ–±–Ω–æ–≤–ª—ë–Ω)
   - –î–æ–±–∞–≤–ª–µ–Ω—ã –ø–æ–ª—è: `weekDays`, `intervalDays`, `timesPerDay`
   - –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –º–∞—Å—Å–∏–≤–∞ schedules

3. **`src/bot/types.ts`** (–æ–±–Ω–æ–≤–ª—ë–Ω)
   - –†–∞—Å—à–∏—Ä–µ–Ω `MedicationData`
   - –î–æ–±–∞–≤–ª–µ–Ω `ScheduleData`

4. **`src/utils/calendar.ts`** (–Ω–æ–≤—ã–π)
   - –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∫–∞–ª–µ–Ω–¥–∞—Ä—è
   - –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã –¥–Ω–µ–π –Ω–µ–¥–µ–ª–∏

---

## üöÄ –ß–¢–û –î–ï–õ–ê–¢–¨ –î–ê–õ–¨–®–ï:

### –®–∞–≥ 1: –ü–µ—Ä–µ–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å Prisma Client
```bash
npm run prisma:generate
```
–≠—Ç–æ –æ–±–Ω–æ–≤–∏—Ç —Ç–∏–ø—ã Prisma —Å –Ω–æ–≤—ã–º–∏ –ø–æ–ª—è–º–∏ `weekDays`, `intervalDays`, `timesPerDay`.

### –®–∞–≥ 2: –ü–æ–¥–∫–ª—é—á–∏—Ç—å –Ω–æ–≤—ã–π —Å—Ü–µ–Ω–∞—Ä–∏–π
–ù—É–∂–Ω–æ –æ–±–Ω–æ–≤–∏—Ç—å `src/bot/index.ts`:
- –ò–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å `addMedicationImprovedScene`
- –î–æ–±–∞–≤–∏—Ç—å –≤ stage
- –ò–∑–º–µ–Ω–∏—Ç—å –∫–æ–º–∞–Ω–¥—É `/add` –Ω–∞ –Ω–æ–≤—ã–π —Å—Ü–µ–Ω–∞—Ä–∏–π

### –®–∞–≥ 3: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
```bash
npm run dev
```

–ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ:
1. `/add` —Å –≤—ã–±–æ—Ä–æ–º –∫–∞–ª–µ–Ω–¥–∞—Ä—è
2. –í—ã–±–æ—Ä –¥–Ω–µ–π –Ω–µ–¥–µ–ª–∏
3. 2-3 —Ä–∞–∑–∞ –≤ –¥–µ–Ω—å
4. "–í–æ –≤—Ä–µ–º—è –µ–¥—ã"

---

## ‚ö†Ô∏è –í–ê–ñ–ù–û:

**–°–µ–π—á–∞—Å –±–æ—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –°–¢–ê–†–´–ô —Å—Ü–µ–Ω–∞—Ä–∏–π** `add-medication.scene.ts`

–ù–æ–≤—ã–π —Å—Ü–µ–Ω–∞—Ä–∏–π `add-medication-improved.scene.ts` —Å–æ–∑–¥–∞–Ω, –Ω–æ –ù–ï –ø–æ–¥–∫–ª—é—á–µ–Ω.

–î–≤–∞ –≤–∞—Ä–∏–∞–Ω—Ç–∞:
1. **–ó–∞–º–µ–Ω–∏—Ç—å —Å—Ç–∞—Ä—ã–π** - `/add` –±—É–¥–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –Ω–æ–≤—ã–π —Å—Ü–µ–Ω–∞—Ä–∏–π
2. **–î–æ–±–∞–≤–∏—Ç—å –∫–∞–∫ –Ω–æ–≤—É—é –∫–æ–º–∞–Ω–¥—É** - `/add2` –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

---

## üìä –ß—Ç–æ –æ—Å—Ç–∞–ª–æ—Å—å:

- ‚è≥ **–≠—Ç–∞–ø 3**: –ö–æ–º–∞–Ω–¥–∞ `/edit` –¥–ª—è —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –ª–µ–∫–∞—Ä—Å—Ç–≤
- ‚è≥ –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ —É–ª—É—á—à–µ–Ω–Ω–æ–≥–æ —Å—Ü–µ–Ω–∞—Ä–∏—è –∫ –±–æ—Ç—É

---

## ‚ùì –°–ª–µ–¥—É—é—â–∏–π —à–∞–≥?

**–í—ã–±–µ—Ä–∏—Ç–µ:**
1. **"–ü–æ–¥–∫–ª—é—á–∏—Ç—å"** - —è –∏–Ω—Ç–µ–≥—Ä–∏—Ä—É—é –Ω–æ–≤—ã–π —Å—Ü–µ–Ω–∞—Ä–∏–π –≤ –±–æ—Ç–∞
2. **"–≠—Ç–∞–ø 3"** - —Å–æ–∑–¥–∞–º –∫–æ–º–∞–Ω–¥—É `/edit`
3. **"–¢–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å"** - –¥–∞–º –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –¥–ª—è —Ä—É—á–Ω–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

–°–∫–∞–∂–∏—Ç–µ —á—Ç–æ –¥–µ–ª–∞—Ç—å –¥–∞–ª—å—à–µ! üéØ
