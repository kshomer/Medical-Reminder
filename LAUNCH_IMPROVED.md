# üöÄ –ó–∞–ø—É—Å–∫ —É–ª—É—á—à–µ–Ω–Ω–æ–≥–æ –±–æ—Ç–∞

## ‚úÖ –ß—Ç–æ –±—ã–ª–æ —Å–¥–µ–ª–∞–Ω–æ:

### 1. **–ü–æ–¥–∫–ª—é—á—ë–Ω —É–ª—É—á—à–µ–Ω–Ω—ã–π —Å—Ü–µ–Ω–∞—Ä–∏–π**
- ‚úÖ `src/bot/index.ts` –æ–±–Ω–æ–≤–ª—ë–Ω
- ‚úÖ –ò–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω `addMedicationImprovedScene`
- ‚úÖ –ö–æ–º–∞–Ω–¥–∞ `/add` —Ç–µ–ø–µ—Ä—å –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –Ω–æ–≤—ã–π —Å—Ü–µ–Ω–∞—Ä–∏–π
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ `ignore` –¥–ª—è –∫–∞–ª–µ–Ω–¥–∞—Ä—è

### 2. **–ì–æ—Ç–æ–≤—ã–µ —Ñ–∞–π–ª—ã:**
- ‚úÖ `src/bot/scenes/add-medication-improved.scene.ts` (551 —Å—Ç—Ä–æ–∫–∞)
- ‚úÖ `src/utils/calendar.ts` (–≥–µ–Ω–µ—Ä–∞—Ü–∏—è UI)
- ‚úÖ `src/services/medication.service.ts` (–æ–±–Ω–æ–≤–ª—ë–Ω)
- ‚úÖ `src/bot/types.ts` (—Ä–∞—Å—à–∏—Ä–µ–Ω)

---

## üîß –ó–ê–ü–£–°–ö:

### –®–∞–≥ 1: –ü–µ—Ä–µ–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å Prisma Client
```bash
npm run prisma:generate
```

**–ó–∞—á–µ–º:** –û–±–Ω–æ–≤–∏—Ç—å —Ç–∏–ø—ã Prisma —Å –Ω–æ–≤—ã–º–∏ –ø–æ–ª—è–º–∏ (`weekDays`, `intervalDays`, `timesPerDay`)

### –®–∞–≥ 2: –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å –±–æ—Ç
```bash
npm run dev
```

**–ß—Ç–æ –¥–æ–ª–∂–Ω–æ –ø–æ—è–≤–∏—Ç—å—Å—è:**
```
[INFO] Scheduler started - checking for notifications every minute
[INFO] Bot started in polling mode with scheduler
```

---

## üß™ –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–ï:

### –¢–µ—Å—Ç 1: –ö–∞–ª–µ–Ω–¥–∞—Ä—å –¥–ª—è –¥–∞—Ç—ã –Ω–∞—á–∞–ª–∞
1. –û—Ç–ø—Ä–∞–≤—å—Ç–µ `/add`
2. –í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ: `–¢–µ—Å—Ç–æ–≤–æ–µ –ª–µ–∫–∞—Ä—Å—Ç–≤–æ`
3. –û–ø–∏—Å–∞–Ω–∏–µ: `/skip`
4. –ù–∞–∂–º–∏—Ç–µ **üìÜ –í—ã–±—Ä–∞—Ç—å –¥–∞—Ç—É**
5. ‚úÖ –î–æ–ª–∂–µ–Ω –ø–æ—è–≤–∏—Ç—å—Å—è –∫–∞–ª–µ–Ω–¥–∞—Ä—å —Å –∫–Ω–æ–ø–∫–∞–º–∏

### –¢–µ—Å—Ç 2: –í—ã–±–æ—Ä –¥–Ω–µ–π –Ω–µ–¥–µ–ª–∏
1. –ü–æ—Å–ª–µ –≤—ã–±–æ—Ä–∞ –¥–∞—Ç—ã –Ω–∞—á–∞–ª–∞
2. –í—ã–±–µ—Ä–∏—Ç–µ –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å (–ª—é–±—É—é)
3. –ù–∞–∂–º–∏—Ç–µ **–í—ã–±—Ä–∞—Ç—å –¥–Ω–∏ –Ω–µ–¥–µ–ª–∏**
4. ‚úÖ –î–æ–ª–∂–Ω—ã –ø–æ—è–≤–∏—Ç—å—Å—è –∫–Ω–æ–ø–∫–∏ –ü–Ω-–í—Å
5. –í—ã–±–µ—Ä–∏—Ç–µ –Ω–µ—Å–∫–æ–ª—å–∫–æ –¥–Ω–µ–π (–ø–æ—è–≤—è—Ç—Å—è –≥–∞–ª–æ—á–∫–∏ ‚úÖ)
6. –ù–∞–∂–º–∏—Ç–µ **‚úÖ –ì–æ—Ç–æ–≤–æ**

### –¢–µ—Å—Ç 3: –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –ø—Ä–∏—ë–º—ã
1. –í—ã–±–µ—Ä–∏—Ç–µ **2 —Ä–∞–∑–∞ –≤ –¥–µ–Ω—å**
2. –í–≤–µ–¥–∏—Ç–µ –ø–µ—Ä–≤–æ–µ –≤—Ä–µ–º—è: `09:00`
3. –í–≤–µ–¥–∏—Ç–µ –¥–æ–∑–∏—Ä–æ–≤–∫—É: `1 —Ç–∞–±–ª–µ—Ç–∫–∞`
4. –í—ã–±–µ—Ä–∏—Ç–µ **–í–æ –≤—Ä–µ–º—è –µ–¥—ã** ‚¨ÖÔ∏è –ù–û–í–û–ï!
5. ‚úÖ –î–æ–ª–∂–µ–Ω –∑–∞–ø—Ä–æ—Å–∏—Ç—å –≤—Ç–æ—Ä–æ–π –ø—Ä–∏—ë–º
6. –í–≤–µ–¥–∏—Ç–µ –≤—Ç–æ—Ä–æ–µ –≤—Ä–µ–º—è: `21:00`
7. –í–≤–µ–¥–∏—Ç–µ –¥–æ–∑–∏—Ä–æ–≤–∫—É: `1 —Ç–∞–±–ª–µ—Ç–∫–∞`
8. –í—ã–±–µ—Ä–∏—Ç–µ **–ü–æ—Å–ª–µ –µ–¥—ã**

### –¢–µ—Å—Ç 4: –§–∏–Ω–∞–ª—å–Ω–æ–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ
1. –ü–æ—Å–ª–µ –≤—Å–µ—Ö –ø—Ä–∏—ë–º–æ–≤ –¥–æ–ª–∂–Ω–æ –ø–æ—è–≤–∏—Ç—å—Å—è –∫—Ä–∞—Å–∏–≤–æ–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤—Å–µ –¥–∞–Ω–Ω—ã–µ
3. –ù–∞–∂–º–∏—Ç–µ **‚úÖ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å**
4. ‚úÖ –î–æ–ª–∂–Ω–æ –ø–æ—è–≤–∏—Ç—å—Å—è: "–õ–µ–∫–∞—Ä—Å—Ç–≤–æ —É—Å–ø–µ—à–Ω–æ –¥–æ–±–∞–≤–ª–µ–Ω–æ!"

### –¢–µ—Å—Ç 5: –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤ –ë–î
```bash
/list
```
–î–æ–ª–∂–Ω–æ –ø–æ–∫–∞–∑–∞—Ç—å –Ω–æ–≤–æ–µ –ª–µ–∫–∞—Ä—Å—Ç–≤–æ —Å–æ –≤—Å–µ–º–∏ –¥–µ—Ç–∞–ª—è–º–∏.

---

## üéØ –ù–æ–≤—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:

### üìÖ **–ö–∞–ª–µ–Ω–¥–∞—Ä—å**
- –í—ã–±–æ—Ä –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π –¥–∞—Ç—ã –Ω–∞—á–∞–ª–∞
- –í—ã–±–æ—Ä –ø–µ—Ä–∏–æ–¥–∞ –æ–∫–æ–Ω—á–∞–Ω–∏—è
- –ù–∞–≤–∏–≥–∞—Ü–∏—è –ø–æ –º–µ—Å—è—Ü–∞–º (‚óÄÔ∏è ‚ñ∂Ô∏è)

### üìÜ **–î–Ω–∏ –Ω–µ–¥–µ–ª–∏**
- –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π –≤—ã–±–æ—Ä –ü–Ω-–í—Å
- –í–∏–∑—É–∞–ª—å–Ω–∞—è –∏–Ω–¥–∏–∫–∞—Ü–∏—è (‚úÖ)
- –ú–æ–∂–Ω–æ –≤—ã–±—Ä–∞—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –¥–Ω–µ–π

### üî¢ **–ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –ø—Ä–∏—ë–º—ã**
- –û—Ç 1 –¥–æ 10 —Ä–∞–∑ –≤ –¥–µ–Ω—å
- –î–ª—è –∫–∞–∂–¥–æ–≥–æ –ø—Ä–∏—ë–º–∞:
  - –°–≤–æ—ë –≤—Ä–µ–º—è (–ß–ß:–ú–ú)
  - –°–≤–æ—è –¥–æ–∑–∏—Ä–æ–≤–∫–∞
  - –°–≤–æ–∏ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

### üçΩÔ∏è **–ù–æ–≤–∞—è –æ–ø—Ü–∏—è**
- **–í–æ –≤—Ä–µ–º—è –µ–¥—ã** (–¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ –∫ "–î–æ" –∏ "–ü–æ—Å–ª–µ")

### ‚úÖ **–§–∏–Ω–∞–ª—å–Ω–æ–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ**
- –ö—Ä–∞—Å–∏–≤–æ–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –≤—Å–µ—Ö –¥–∞–Ω–Ω—ã—Ö
- –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –æ—Ç–º–µ–Ω–∏—Ç—å –ø–µ—Ä–µ–¥ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º

---

## ‚ö†Ô∏è –í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã:

### –û—à–∏–±–∫–∞: "weekDays does not exist"
**–†–µ—à–µ–Ω–∏–µ:**
```bash
npm run prisma:generate
```

### –ö–∞–ª–µ–Ω–¥–∞—Ä—å –Ω–µ –ø–æ—è–≤–ª—è–µ—Ç—Å—è
**–ü—Ä–æ–≤–µ—Ä—å—Ç–µ:** –û–±—Ä–∞–±–æ—Ç—á–∏–∫ `ignore` –¥–æ–±–∞–≤–ª–µ–Ω –≤ `bot/index.ts` (—Å—Ç—Ä–æ–∫–∞ 106)

### –ö–Ω–æ–ø–∫–∏ –¥–Ω–µ–π –Ω–µ–¥–µ–ª–∏ –Ω–µ —Ä–∞–±–æ—Ç–∞—é—Ç
**–ü—Ä–æ–≤–µ—Ä—å—Ç–µ:** –í—Å–µ callback –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è –≤–Ω—É—Ç—Ä–∏ —Å—Ü–µ–Ω–∞—Ä–∏—è, –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –Ω–µ –Ω—É–∂–Ω—ã

---

## üìä –°—Ä–∞–≤–Ω–µ–Ω–∏–µ:

| –§—É–Ω–∫—Ü–∏—è | –°—Ç–∞—Ä—ã–π /add | –ù–æ–≤—ã–π /add |
|---------|-------------|------------|
| –í—ã–±–æ—Ä –¥–∞—Ç—ã | ‚ùå –¢–æ–ª—å–∫–æ —Ç–µ–∫—Å—Ç | ‚úÖ –ö–∞–ª–µ–Ω–¥–∞—Ä—å |
| –î–Ω–∏ –Ω–µ–¥–µ–ª–∏ | ‚ùå –ù–µ—Ç | ‚úÖ –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ |
| –†–∞–∑ –≤ –¥–µ–Ω—å | ‚ùå –¢–æ–ª—å–∫–æ 1 | ‚úÖ 1-10 —Ä–∞–∑ |
| –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ | ‚úÖ –î–æ/–ü–æ—Å–ª–µ –µ–¥—ã | ‚úÖ + –í–æ –≤—Ä–µ–º—è –µ–¥—ã |
| –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ | ‚ùå –ù–µ—Ç | ‚úÖ –ö—Ä–∞—Å–∏–≤–æ–µ |

---

## üéâ –ì–æ—Ç–æ–≤–æ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é!

–ü–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —à–∞–≥–æ–≤ 1-2 –±–æ—Ç –ø–æ–ª–Ω–æ—Å—Ç—å—é –≥–æ—Ç–æ–≤ —Å —É–ª—É—á—à–µ–Ω–Ω—ã–º –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–º!

**–°–ª–µ–¥—É—é—â–∏–π —ç—Ç–∞–ø:** –ö–æ–º–∞–Ω–¥–∞ `/edit` –¥–ª—è —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –ª–µ–∫–∞—Ä—Å—Ç–≤ (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ).
